alias State r0
alias HangarMode r1
alias ManualCommand r2
alias Self db
alias Memory d0
alias Dial d1
alias Lever d2
alias Display d3
define StateIdle 0
define StatePressurizing 1
define StateDepressurizing 2
define SensorHash -1252983604
define ActiveVentHash -1129453144
define HangarDoorHash -1351081801
define FlashingLightHash -1535893860
define SpeakerHash -1
define Inward 1
define Outward 0
define TargetPressureFilled 0.5
define TargetPressureEmtpy 0.5
Main:
l State Self Setting
s Display Setting 111
l ManualCommand Lever Setting
l HangarMode Dial Setting
yield
jal Execute
j Main
jr 86
WaitDoors:
alias HangarDoorState r3
lb HangarDoorState HangarDoorHash Idle Sum
s Display Setting HangarDoorState
yield
sgtz r15 HangarDoorState
beqz r15 if0exit
s Display Setting 666
yield
jal WaitDoors
if0exit:
j ra
StandBy:
seq r15 ManualCommand 1
beqz r15 if1exit
seqz r14 HangarMode
beqz r14 if2exit
j Main
if2exit:
move State HangarMode
if1exit:
jal Execute
j ra
ToggleDoors:
alias Status r15
s Display Setting r15
sb HangarDoorHash Open r15
jal WaitDoors
j ra
Pressurize:
s Self Setting StatePressurizing
s Display Setting 222
move r15 1
jal ToggleDoors
jal Finalize
j ra
Depressurize:
s Display Setting 555
s Self Setting StateDepressurizing
move r15 0
jal ToggleDoors
jal Finalize
j ra
Finalize:
s Self Setting StateIdle
s Display Setting 1010
yield
j ra
Execute:
brne State StateIdle 4
s Display Setting 222
yield
jal StandBy
brne State StatePressurizing 4
s Display Setting 333
yield
jal Pressurize
brne State StateDepressurizing 4
s Display Setting 444
yield
jal Depressurize
j ra